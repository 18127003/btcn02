{"version":3,"sources":["constant.ts","util.ts","component/Square.tsx","component/Board.tsx","component/HistoryList.tsx","component/Game.tsx","index.tsx"],"names":["DRAW","hasConsecutive","arr","cons","pad","length","result","prevElement","undefined","count","i","push","Square","props","className","onClick","isHighlight","value","id","Board","renderSquare","row","col","size","squares","winner","includes","generateRow","rowData","Array","fill","boardData","generateBoard","HistoryList","data","onSelect","useState","current","setCurrent","isReverse","setReverse","moves","map","step","stepNumber","move","position","desc","style","fontWeight","reverse","Game","status","winCriteria","histories","setHistories","xIsNext","currentStep","setCurrentStep","handleClick","modifiedHistories","slice","currentPlayer","checkWinner","checkRow","v","filter","n","console","log","checkCol","checkLeftDiag","Math","abs","checkRightDiag","every","square","calculateWinner","line","find","history","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.eba5e2f2.chunk.js","sourcesContent":["export const DRAW = \"DRAW\";","import { DRAW } from \"./constant\";\r\n\r\nexport const hasConsecutive = (arr: number[], cons: number, pad: number) => {\r\n    if (cons > arr.length){\r\n        return undefined;\r\n    }\r\n    let result: number[] = [];\r\n    let prevElement: number|undefined = undefined;\r\n    let count:number = 1;\r\n    for (let i = 0; i < arr.length; i++) {\r\n        if(prevElement === arr[i]-pad){\r\n            count++;\r\n            result.push(arr[i])\r\n            if (count === cons) {\r\n                return result;\r\n            };\r\n        } else {\r\n            count = 1;\r\n            result = [arr[i]]\r\n        }\r\n        prevElement = arr[i];\r\n    };\r\n    return undefined;\r\n}\r\n\r\nexport const calculateWinner = (squares:(string|null)[], row: number, col:number, size: number, winCriteria: number) => {\r\n    let winner:number[]|undefined;\r\n    const currentPlayer = squares[row * size +col]\r\n\r\n    // check row\r\n    let checkRow = Array<number>(size).fill(0).map((v, i)=>v = row * size + i)\r\n      .filter(n=>squares[n]===currentPlayer)\r\n    console.log(checkRow)\r\n\r\n    winner = hasConsecutive(checkRow, winCriteria, 1)\r\n    if(winner) {\r\n      return winner;\r\n    }\r\n\r\n    // check col \r\n    let checkCol = Array<number>(size).fill(0).map((v, i)=>v = col + i * size)\r\n      .filter(n=>squares[n]===currentPlayer)\r\n    console.log(checkCol)\r\n\r\n    winner = hasConsecutive(checkCol, winCriteria, size)\r\n    if(winner) {\r\n      return winner;\r\n    }\r\n\r\n    // check diag\r\n    let checkLeftDiag = Array<number>(size-Math.abs(row-col)).fill(0).map((v,i)=>v = i*size + col + i - row)\r\n      .filter(n=>squares[n]===currentPlayer)\r\n    console.log(checkLeftDiag)\r\n\r\n    winner = hasConsecutive(checkLeftDiag, winCriteria, size + 1)\r\n    if(winner) {\r\n      return winner;\r\n    }\r\n\r\n    let checkRightDiag = Array<number>(size - Math.abs(col+row+1-size)).fill(0).map((v,i)=>v = i*size + col - i + row)\r\n      .filter(n=>squares[n]===currentPlayer)\r\n    console.log(checkRightDiag)\r\n\r\n    winner = hasConsecutive(checkRightDiag, winCriteria, size - 1)\r\n    if(winner) {\r\n      return winner;\r\n    }\r\n\r\n    // check draw\r\n    if(squares.every(square=>square)){\r\n      return DRAW;\r\n    }\r\n    return [];\r\n}","import React from \"react\";\r\n\r\nconst Square: React.FC<SquareProp> = (props) => {\r\n    const renderValue = ()=>{\r\n      if(props.isHighlight){\r\n        return (\r\n          <mark>{props.value}</mark>\r\n        )\r\n      }\r\n      return props.value\r\n    }\r\n\r\n    return (\r\n      <button className=\"square\" onClick={props.onClick} key={props.id}>\r\n        {renderValue()}\r\n      </button>\r\n    );\r\n}\r\n\r\nexport default Square;","import Square from \"./Square\";\r\nimport React from \"react\";\r\n\r\nconst Board: React.FC<BoardProp> = (props) => {\r\n    const renderSquare = (row: number, col:number, size:number) =>  {\r\n      return (\r\n        <Square\r\n          id = {row*size+col}\r\n          value = {props.squares[row*size+col]}\r\n          onClick={() => props.onClick(row, col)}\r\n          isHighlight = {props.winner.includes(row*size+col)}\r\n        />\r\n      );\r\n    }\r\n\r\n    const generateRow = (row: number, size: number) => {\r\n      let rowData = Array(size).fill(null)\r\n      for (let col = 0; col < size; ++col) {\r\n          rowData[col] = renderSquare(row, col, size)\r\n      }\r\n      return rowData;\r\n    }\r\n\r\n    const generateBoard = (size: number) => {\r\n      let boardData = Array(size).fill(null)\r\n      for (let row = 0; row < size; ++row) {\r\n        boardData[row] = (\r\n          <div className=\"board-row\" key={row}>\r\n            {generateRow(row, size)}\r\n          </div>\r\n        )\r\n      }\r\n      return boardData;\r\n    }\r\n  \r\n    return (\r\n        <div>\r\n          {generateBoard(props.size)}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Board;\r\n  ","import React, { useState } from \"react\";\r\n\r\nconst HistoryList: React.FC<HistoryListProp> = ({data, onSelect})=>{\r\n    const [current, setCurrent] = useState<number>(data.length-1)\r\n\r\n    const [isReverse, setReverse] = useState(false)\r\n\r\n    const reverseMove = () => {\r\n        setReverse(\r\n          !isReverse\r\n        )\r\n    }\r\n\r\n    let moves = data.map((step) => {\r\n        const stepNumber = step.move.stepNumber\r\n        const position = step.move.position\r\n        const desc = stepNumber?\r\n            `Go to move #${stepNumber} (${position?.col}, ${position?.row})` :\r\n            'Go to game start';\r\n        return (\r\n            <li key={stepNumber}>\r\n            <button \r\n                onClick={()=>{\r\n                    onSelect(stepNumber)\r\n                    setCurrent(stepNumber)\r\n                }}\r\n                style = {stepNumber===current?{fontWeight: \"bold\"}:{}}\r\n            >\r\n                    {desc}\r\n            </button>\r\n            </li>\r\n        );\r\n    });\r\n    if(isReverse){\r\n        moves = moves.reverse()\r\n    }\r\n    return (\r\n        <>\r\n            <button onClick={reverseMove}>\r\n                {`Change to ${isReverse?\"ascending\":\"descending\"} order`}\r\n            </button>\r\n            <ol>\r\n                {moves}\r\n            </ol>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default HistoryList;","import React, { useState } from \"react\";\r\nimport { DRAW } from \"../constant\";\r\nimport { calculateWinner } from \"../util\";\r\nimport Board from \"./Board\";\r\nimport HistoryList from \"./HistoryList\";\r\n\r\n  \r\ntype GameState = {\r\n  stepNumber: number,\r\n  xIsNext: boolean\r\n}\r\n\r\nconst Game : React.FC<GameProp> = ({size, winCriteria}) => {\r\n    const [histories, setHistories] = useState<HistoryStep[]>([\r\n      {\r\n        move: {\r\n          squares: Array<string|null>(size*size).fill(null),\r\n          position: {\r\n            row: -1,\r\n            col: -1\r\n          },\r\n          stepNumber: 0\r\n        },\r\n        result: undefined\r\n      }\r\n    ]);\r\n\r\n    const [currentStep, setCurrentStep] = useState<GameState>({\r\n      stepNumber: 0,\r\n      xIsNext: true\r\n    });\r\n  \r\n    const handleClick = (row: number, col:number) => {\r\n      const modifiedHistories = histories.slice(0, currentStep.stepNumber+1);\r\n      const current = modifiedHistories.slice(-1)[0];\r\n      const squares = current.move.squares.slice();\r\n      let i = row * size + col;\r\n      if (current.result || squares[i]) {\r\n        return;\r\n      }\r\n      let currentPlayer = currentStep.xIsNext ? \"X\" : \"O\";\r\n      squares[i] = currentPlayer;\r\n\r\n      let checkWinner = calculateWinner(squares, row, col, size, winCriteria)\r\n      let result: Result|undefined = undefined;\r\n\r\n      if (typeof checkWinner === \"string\"){\r\n        result = {\r\n          result: DRAW,\r\n          line: []\r\n        }\r\n      } else if (checkWinner.length > 0){\r\n        result = {\r\n          result: currentPlayer,\r\n          line: checkWinner\r\n        }\r\n      }\r\n\r\n      setHistories(\r\n        [\r\n            ...modifiedHistories,\r\n            {\r\n              move: {\r\n                squares: squares,\r\n                position: {\r\n                  row: row,\r\n                  col: col\r\n                },\r\n                stepNumber: modifiedHistories.length++\r\n              },\r\n              result: result\r\n            } \r\n        ]\r\n      );\r\n      setCurrentStep({\r\n        stepNumber: modifiedHistories.length-1,\r\n        xIsNext: !currentStep.xIsNext\r\n      });\r\n    }\r\n  \r\n    const jumpTo = (step: number) => {\r\n      setCurrentStep({\r\n        stepNumber: step,\r\n        xIsNext: (step % 2) === 0\r\n      });\r\n    }\r\n \r\n    let current = histories.find(history=>history.move.stepNumber===currentStep.stepNumber);\r\n    if(current===undefined){\r\n      current = histories.slice(-1)[0]\r\n    }\r\n    let status: string;\r\n    let winner : number[] = [];\r\n    const result = current.result;\r\n    if(result === undefined){\r\n      status = \"Next player: \" + (currentStep.xIsNext ? \"X\" : \"O\");\r\n    }\r\n    else if (result.result === DRAW){\r\n      status = \"Draw\"\r\n    }\r\n    else {\r\n      status = \"Winner: \" + result.result;\r\n      winner = result.line;\r\n    }\r\n\r\n    return (\r\n      <div className=\"game\">\r\n          <div className=\"game-board\">\r\n          <Board\r\n              squares={current.move.squares}\r\n              size = {size}\r\n              onClick={(row:number, col:number) => handleClick(row, col)}\r\n              winner = {winner}\r\n          />\r\n          </div>\r\n          <div className=\"game-info\">\r\n          <div>{status}</div> \r\n          <HistoryList data={histories} onSelect={jumpTo}/>\r\n          </div>\r\n      </div>\r\n    );\r\n  \r\n}\r\n\r\nexport default Game;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Game from './component/Game';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Game size={10} winCriteria={5}/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}